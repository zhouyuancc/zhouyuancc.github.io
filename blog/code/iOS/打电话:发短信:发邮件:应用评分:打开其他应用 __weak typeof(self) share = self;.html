<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1404.34">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Heiti SC Light'}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #1d9421}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #1d9421; min-height: 21.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #c32275}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; min-height: 21.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #3d1d81}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Heiti SC Light'; color: #1d9421}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #c91b13}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #822e0e; min-height: 21.0px}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #6122ae}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #294c50}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #703daa}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Menlo; color: #c91b13; min-height: 21.0px}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Heiti SC Light'; min-height: 19.0px}
    span.s1 {font-variant-ligatures: no-common-ligatures}
    span.s2 {font: 18.0px 'Heiti SC Light'; font-variant-ligatures: no-common-ligatures}
    span.s3 {font-variant-ligatures: no-common-ligatures; color: #000000}
    span.s4 {font-variant-ligatures: no-common-ligatures; color: #6122ae}
    span.s5 {font-variant-ligatures: no-common-ligatures; color: #c32275}
    span.s6 {font-variant-ligatures: no-common-ligatures; color: #539aa4}
    span.s7 {font-variant-ligatures: no-common-ligatures; color: #3d1d81}
    span.s8 {font-variant-ligatures: no-common-ligatures; color: #c91b13}
    span.s9 {font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #000000}
    span.s10 {font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures}
    span.s11 {font-variant-ligatures: no-common-ligatures; color: #1337ff}
    span.s12 {font-variant-ligatures: no-common-ligatures; color: #822e0e}
    span.s13 {font-variant-ligatures: no-common-ligatures; color: #3c828c}
    span.s14 {font-variant-ligatures: no-common-ligatures; color: #1d9421}
    span.s15 {font: 18.0px 'Heiti SC Light'; font-variant-ligatures: no-common-ligatures; color: #c91b13}
    span.s16 {font: 18.0px 'Heiti SC Light'; font-variant-ligatures: no-common-ligatures; color: #1d9421}
    span.s17 {font-variant-ligatures: no-common-ligatures; color: #703daa}
    span.s18 {font-variant-ligatures: no-common-ligatures; color: #0435ff}
  </style>
</head>
<body>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">打电话</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>AboutViewController.m</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span></span><span class="s2">长期用，所以用</span><span class="s1">strong</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p5"><span class="s1">@property</span><span class="s3"> (</span><span class="s1">nonatomic</span><span class="s3">,</span><span class="s1">strong</span><span class="s3">) </span><span class="s4">UIWebView</span><span class="s3"> *webView;</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">- (</span><span class="s5">void</span><span class="s1">)viewDidLoad {</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">    </span>[</span><span class="s5">super</span><span class="s3"> </span><span class="s1">viewDidLoad</span><span class="s3">];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">//</span><span class="s2">不要把</span><span class="s1">self.webView</span><span class="s2">添加到界面上</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s5">self</span><span class="s1">.</span><span class="s6">webView</span><span class="s1"> = [[</span><span class="s4">UIWebView</span><span class="s1"> </span><span class="s7">alloc</span><span class="s1">]</span><span class="s7">init</span><span class="s1">];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>}</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s4">NSURL</span><span class="s1"> *url = [</span><span class="s4">NSURL</span><span class="s1"> </span><span class="s7">URLWithString</span><span class="s1">:</span><span class="s8">@"tel://10086"</span><span class="s1">];</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">  </span>[</span><span class="s5">self</span><span class="s3">.</span><span class="s6">webView</span><span class="s3"> </span><span class="s1">loadRequest</span><span class="s3">:[</span><span class="s4">NSURLRequest</span><span class="s3"> </span><span class="s1">requestWithURL</span><span class="s3">:url]];</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p8"><span class="s9"><span class="Apple-converted-space">        </span></span><span class="s10">//</span><span class="s1">缺点：无法回到原应用程序</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>NSURL *url = [NSURL URLWithString:@"<a href="tel://10086"><span class="s11">tel://10086</span></a>"];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>[[UIApplication sharedApplication] openURL:url];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p8"><span class="s9"><span class="Apple-converted-space">        </span></span><span class="s10">//</span><span class="s1">比上面的方法多一个提醒，需点击呼叫</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">可以回到原应用</span></p>
<p class="p8"><span class="s9"><span class="Apple-converted-space">        </span></span><span class="s10">//</span><span class="s1">缺点：私有</span><span class="s10">API</span><span class="s1">，可能不会被审核通过</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>NSURL *url = [NSURL URLWithString:@"telprompt://10086"];//</span><span class="s2">私有协议</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>[[UIApplication sharedApplication] openURL:url];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">发短信</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>ShareViewController.m</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p9"><span class="s12">#import </span><span class="s1">&lt;MessageUI/MessageUI.h&gt;</span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p11"><span class="s5">@interface</span><span class="s3"> </span><span class="s13">ShareViewController</span><span class="s3"> ()&lt;</span><span class="s1">MFMessageComposeViewControllerDelegate</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1">@end</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>block</span><span class="s2">中用到</span><span class="s1">self </span><span class="s2">会产生</span><span class="s1"> </span><span class="s2">内存泄漏</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s14">/**</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">     </span>0419-28block</span><span class="s2">的循环引用</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">     </span>//block</span><span class="s2">用了外面的东西（如</span><span class="s1">self</span><span class="s2">），先把</span><span class="s1">self</span><span class="s2">变成</span><span class="s1">__weak</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">     </span>*/</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">/***********************/</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">//<span class="Apple-converted-space">    </span>__unsafe_unretained ShareViewController *share = self;//</span><span class="s2">法</span><span class="s1">1</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>//<span class="Apple-converted-space">    </span>__weak ShareViewController *share = self;//</span><span class="s2">法</span><span class="s1">2</span><span class="s2">，防止野指针，功能比</span><span class="s1">__unsafe_unretained</span><span class="s2">多</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">//self = 10 type int //</span><span class="s2">自动判断类型</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s5">__weak</span><span class="s3"> </span><span class="s5">typeof</span><span class="s3">(</span><span class="s5">self</span><span class="s3">) share = </span><span class="s5">self</span><span class="s3">;</span><span class="s1">//</span><span class="s2">法</span><span class="s1">3//</span><span class="s2">看</span><span class="s1">self</span><span class="s2">是什么类型，不用管</span><span class="s1">self</span><span class="s2">是什么类型，循环引用，转换为弱指针</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">/***********************/</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p12"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s13">CellItem</span><span class="s3"> *sms = [</span><span class="s13">CellArrowItem</span><span class="s3"> </span><span class="s1">itemWithTitle</span><span class="s3">:</span><span class="s8">@"</span><span class="s15">短信分享</span><span class="s8">"</span><span class="s1">destVcClass</span><span class="s3">:</span><span class="s5">nil</span><span class="s3">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>sms.</span><span class="s6">option</span><span class="s1"> = ^{</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">不能发短信</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s5">if</span><span class="s3">(![</span><span class="s1">MFMessageComposeViewController</span><span class="s3"> </span><span class="s7">canSendText</span><span class="s3">])</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s5">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>//</span><span class="s2">不返回原程序</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>NSURL *url = [NSURL URLWithString:@"sms://10086"];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>[[UIApplication sharedApplication] openURL:url];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">MFMessageComposeViewController</span><span class="s3"> *vc = [[</span><span class="s1">MFMessageComposeViewController</span><span class="s3"> </span><span class="s7">alloc</span><span class="s3">] </span><span class="s7">init</span><span class="s3">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">设置短信内容</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>vc.</span><span class="s17">body</span><span class="s1"> = </span><span class="s8">@"abcd"</span><span class="s1">;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">设置收件人列表</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>vc.</span><span class="s17">recipients</span><span class="s1"> = </span><span class="s18">@[</span><span class="s8">@"10086"</span><span class="s1">,</span><span class="s8">@"10010"</span><span class="s18">]</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">设置代理</span></p>
<p class="p13"><span class="s3"><span class="Apple-converted-space">        </span>vc.</span><span class="s1">messageComposeDelegate</span><span class="s3"> = share;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">显示控制器</span><span class="s1">//Modal</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">        </span>[share </span><span class="s1">presentViewController</span><span class="s3">:vc </span><span class="s1">animated</span><span class="s3">:</span><span class="s5">YES</span><span class="s3"> </span><span class="s1">completion</span><span class="s3">:</span><span class="s5">nil</span><span class="s3">];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>};</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p8"><span class="s10">//</span><span class="s1">点击短信界面的取消按钮</span></p>
<p class="p1"><span class="s1">- (</span><span class="s5">void</span><span class="s1">)messageComposeViewController:(</span><span class="s4">MFMessageComposeViewController</span><span class="s1"> *)controller didFinishWithResult:(</span><span class="s17">MessageComposeResult</span><span class="s1">)result</span></p>
<p class="p1"><span class="s1">{</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">    </span>[controller </span><span class="s1">dismissViewControllerAnimated</span><span class="s3">:</span><span class="s5">YES</span><span class="s3"> </span><span class="s1">completion</span><span class="s3">:</span><span class="s5">nil</span><span class="s3">];</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">发邮件</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>ShareViewController.m</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p9"><span class="s12">#import </span><span class="s1">&lt;MessageUI/MessageUI.h&gt;</span></p>
<p class="p14"><span class="s1"></span><br></p>
<p class="p11"><span class="s5">@interface</span><span class="s3"> </span><span class="s13">ShareViewController</span><span class="s3"> ()&lt;</span><span class="s1">MFMailComposeViewControllerDelegate</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1">@end</span></p>
<p class="p14"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>//</span><span class="s2">不返回原程序</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>NSURL *url = [NSURL URLWithString:@"mailto://10086@qq.com"];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>[[UIApplication sharedApplication] openURL:url];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">不能发邮件</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s5">if</span><span class="s3">(![</span><span class="s1">MFMailComposeViewController</span><span class="s3"> </span><span class="s7">canSendMail</span><span class="s3">])</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s5">return</span><span class="s1">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">MFMailComposeViewController</span><span class="s3"> *vc =[[</span><span class="s1">MFMailComposeViewController</span><span class="s3"> </span><span class="s7">alloc</span><span class="s3">] </span><span class="s7">init</span><span class="s3">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">设置邮件主题</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>[vc </span><span class="s7">setSubject</span><span class="s1">:</span><span class="s8">@"</span><span class="s15">会议</span><span class="s8">"</span><span class="s1">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">设置邮件内容</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">        </span>[vc </span><span class="s1">setMessageBody</span><span class="s3">:</span><span class="s8">@"abc"</span><span class="s3"> </span><span class="s1">isHTML</span><span class="s3">:</span><span class="s5">NO</span><span class="s3">];</span><span class="s14">//</span><span class="s16">不是网页</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">设置收件人列表</span></p>
<p class="p9"><span class="s3"><span class="Apple-converted-space">        </span>[vc </span><span class="s7">setToRecipients</span><span class="s3">:</span><span class="s18">@[</span><span class="s1">@"10086@qq.com"</span><span class="s3">,</span><span class="s1">@"123@qq.com"</span><span class="s18">]</span><span class="s3">];</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">设置抄送人列表</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>[vc </span><span class="s7">setCcRecipients</span><span class="s1">:</span><span class="s18">@[</span><span class="s8">@"10086@qq.com"</span><span class="s18">]</span><span class="s1">];</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">设置密送人列表</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">        </span>[vc </span><span class="s1">setBccRecipients</span><span class="s3">:</span><span class="s18">@[</span><span class="s8">@"123@qq.com"</span><span class="s18">]</span><span class="s3">];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">添加附件（一张图片）</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">UIImage</span><span class="s1"> *image = [</span><span class="s4">UIImage</span><span class="s1"> </span><span class="s7">imageNamed</span><span class="s1">:</span><span class="s8">@"fanfan.png"</span><span class="s1">];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>NSData *data = UIImageJPEGRepresentation(image, 0.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">NSData</span><span class="s1"> *data = </span><span class="s7">UIImagePNGRepresentation</span><span class="s1">(image);</span><span class="s14">//</span><span class="s16">把图片压缩成二进制数据</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>//</span><span class="s2">发送</span><span class="s1">txt</span><span class="s2">附件</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">        </span>[NSData dataWithContentsOfFile:@"xxx.txt"];//</span><span class="s2">通过</span><span class="s1">mainBundle</span><span class="s2">获取全路径</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>[vc </span><span class="s7">addAttachmentData</span><span class="s3">:data </span><span class="s7">mimeType</span><span class="s3">:</span><span class="s8">@"image/png"</span><span class="s3"> </span><span class="s7">fileName</span><span class="s3">:</span><span class="s8">@"fanfan.png"</span><span class="s3">];</span><span class="s1">//mimeType:</span><span class="s2">文件类型</span><span class="s1">video/mp4,image/png</span><span class="s2">固定写法</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>/***********************/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">设置代理</span></p>
<p class="p13"><span class="s3"><span class="Apple-converted-space">        </span>vc.</span><span class="s1">mailComposeDelegate</span><span class="s3"> = </span><span class="s5">self</span><span class="s3">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">显示控制器</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">        </span>[</span><span class="s5">self</span><span class="s3"> </span><span class="s1">presentViewController</span><span class="s3">:vc </span><span class="s1">animated</span><span class="s3">:</span><span class="s5">YES</span><span class="s3"> </span><span class="s1">completion</span><span class="s3">:</span><span class="s5">nil</span><span class="s3">];</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">/***********************/</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p14"><span class="s1"></span><br></p>
<p class="p8"><span class="s10">//</span><span class="s1">点击邮件界面的取消按钮，返回原程序</span></p>
<p class="p1"><span class="s1">-(</span><span class="s5">void</span><span class="s1">)mailComposeController:(</span><span class="s4">MFMailComposeViewController</span><span class="s1"> *)controller didFinishWithResult:(</span><span class="s17">MFMailComposeResult</span><span class="s1">)result error:(</span><span class="s4">NSError</span><span class="s1"> *)error</span></p>
<p class="p1"><span class="s1">{</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">    </span>[controller </span><span class="s1">dismissViewControllerAnimated</span><span class="s3">:</span><span class="s5">YES</span><span class="s3"> </span><span class="s1">completion</span><span class="s3">:</span><span class="s5">nil</span><span class="s3">];</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p14"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">应用评分</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>AboutViewController.m</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">NSString</span><span class="s1"> *appId = </span><span class="s8">@"1"</span><span class="s1">;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s4">NSString</span><span class="s3"> *str = [</span><span class="s4">NSString</span><span class="s3"> </span><span class="s7">stringWithFormat</span><span class="s3">:</span><span class="s8">@"itms-apps://itunes.apple.com/cn/app/id%@?mt=8"</span><span class="s3">,appId];</span><span class="s1">//app store//</span><span class="s2">固定写法<span class="Apple-converted-space">    </span></span><span class="s1">itms-apps://itunes.apple.com/cn/app/id%@?mt=8</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">NSURL</span><span class="s1"> *url = [</span><span class="s4">NSURL</span><span class="s1"> </span><span class="s7">URLWithString</span><span class="s1">:str];</span></p>
<p class="p7"><span class="s3"><span class="Apple-converted-space">        </span>[[</span><span class="s4">UIApplication</span><span class="s3"> </span><span class="s1">sharedApplication</span><span class="s3">] </span><span class="s1">openURL</span><span class="s3">:url];</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">产品推荐：打开其他应用</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p2"><span class="s1">设置需打开的应用</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">打开 xxx-Info.plist</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">点击 Bundle display name 的 加号</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">添加 URL types<span class="Apple-converted-space">  </span>数组Array</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">打开 Item0<span class="Apple-converted-space">  </span>添加 URL Schemes</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">URL Identifier<span class="Apple-converted-space">  </span>: ios.itcast.cn <span class="Apple-converted-space">    </span>//路径</span></p>
<p class="p2"><span class="s1">URL Schemes : zy<span class="Apple-converted-space">                        </span>//协议头//可不写</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">zy://ios.itcast.cn</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s4">NSURL</span><span class="s3"> *url = [</span><span class="s4">NSURL</span><span class="s3"> </span><span class="s7">URLWithString</span><span class="s3">:</span><span class="s1">@"zy://ios.itcast.cn"</span><span class="s3">];</span></p>
<p class="p7"><span class="s3">[[</span><span class="s4">UIApplication</span><span class="s3"> </span><span class="s1">sharedApplication</span><span class="s3">] </span><span class="s1">openURL</span><span class="s3">:url];</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>Product.h</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span></span><span class="s1">打开应用的</span><span class="s10">Url</span><span class="s1">的</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span></span><span class="s1">协议头</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p5"><span class="s1">@property</span><span class="s3"> (</span><span class="s1">nonatomic</span><span class="s3">,</span><span class="s1">copy</span><span class="s3">) </span><span class="s4">NSString</span><span class="s3"> *scheme;</span></p>
<p class="p3"><span class="s1">//@property (nonatomic,copy) NSString *customUrl;</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span></span><span class="s2">从</span><span class="s1">AppStore</span><span class="s2">下载的</span><span class="s1">Url</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p5"><span class="s1">@property</span><span class="s3"> (</span><span class="s1">nonatomic</span><span class="s3">,</span><span class="s1">copy</span><span class="s3">) </span><span class="s4">NSString</span><span class="s3"> *url;</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span></span><span class="s1">打开应用的</span><span class="s10">Url</span><span class="s1">的</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span></span><span class="s1">路径（不含协议头）</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p5"><span class="s1">@property</span><span class="s3"> (</span><span class="s1">nonatomic</span><span class="s3">,</span><span class="s1">copy</span><span class="s3">) </span><span class="s4">NSString</span><span class="s3"> *identifier;</span></p>
<p class="p1"><span class="s1">————————————————————————————————————————————————————————————————————————————————</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span>ProductCollectionViewController.m</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">  </span></span><span class="s2">彩票</span><span class="s1">Lottery</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p3"><span class="s1">/**</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span></span><span class="s1">点击了某个格子</span></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space"> </span>//</span><span class="s1">打开推荐的应用</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space"> </span>*/</span></p>
<p class="p1"><span class="s1">- (</span><span class="s5">void</span><span class="s1">)collectionView:(</span><span class="s4">UICollectionView</span><span class="s1"> *)collectionView didSelectItemAtIndexPath:(</span><span class="s4">NSIndexPath</span><span class="s1"> *)indexPath</span></p>
<p class="p1"><span class="s1">{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s13">Product</span><span class="s1"> *p = </span><span class="s5">self</span><span class="s1">.</span><span class="s6">products</span><span class="s1">[indexPath.</span><span class="s17">item</span><span class="s1">];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">    </span>NSLog(@"</span><span class="s2">点击了</span><span class="s1"> %@",p.title);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">NSString</span><span class="s1"> *url = [</span><span class="s4">NSString</span><span class="s1"> </span><span class="s7">stringWithFormat</span><span class="s1">:</span><span class="s8">@"%@://%@"</span><span class="s1">,p.</span><span class="s6">scheme</span><span class="s1">,p.</span><span class="s6">identifier</span><span class="s1">];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">    </span>NSLog(@"%lu",(unsigned long)p.scheme.length);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s5">if</span><span class="s1">(p.</span><span class="s6">scheme</span><span class="s1">.</span><span class="s17">length</span><span class="s1">==</span><span class="s18">0</span><span class="s1">)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>url = [</span><span class="s4">NSString</span><span class="s1"> </span><span class="s7">stringWithFormat</span><span class="s1">:</span><span class="s8">@"%@"</span><span class="s1">,p.</span><span class="s6">identifier</span><span class="s1">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">    </span>NSLog(@"%@",url);</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">NSURL</span><span class="s1"> *customUrl = [</span><span class="s4">NSURL</span><span class="s1"> </span><span class="s7">URLWithString</span><span class="s1">:url];</span></p>
<p class="p11"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">UIApplication</span><span class="s3"> *app = [</span><span class="s1">UIApplication</span><span class="s3"> </span><span class="s7">sharedApplication</span><span class="s3">];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s5">if</span><span class="s1">([app </span><span class="s7">canOpenURL</span><span class="s1">:customUrl])</span><span class="s14">//</span><span class="s16">有安装应用</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s14">//</span><span class="s16">打开应用</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>[app </span><span class="s7">openURL</span><span class="s1">:customUrl];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s5">else</span><span class="s3">{</span><span class="s1">//</span><span class="s2">没有安装应用</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">       </span></span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">//</span><span class="s2">打开</span><span class="s1"> AppStore</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>[app </span><span class="s7">openURL</span><span class="s1">:[</span><span class="s4">NSURL</span><span class="s1"> </span><span class="s7">URLWithString</span><span class="s1">:p.</span><span class="s6">url</span><span class="s1">]];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">    </span>NSURL *url = [NSURL URLWithString:@"zy://ios.itcast.cn"];</span></p>
<p class="p3"><span class="s1">//<span class="Apple-converted-space">    </span>[[UIApplication sharedApplication] openURL:url];</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p6"><span class="s1"></span><br></p>
</body>
</html>
